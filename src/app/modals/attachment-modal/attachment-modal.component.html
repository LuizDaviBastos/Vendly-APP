<ion-content class="bg-white" scrollY="true">
    <ion-list class="anexo" lines="none">
        <ion-item class="item-background-color header-item">
            <ion-title>Anexos</ion-title>
            <div class="edit-msg-icon-container">
                <div style="display: flex;">
                    <ion-icon (click)="modalController.dismiss()" style="padding: 3px;border-radius: 18px;
                    color: #f7f7f7;
                    background-color: #959090;" name="close"></ion-icon>
                </div>
            </div>
        </ion-item>
        <div class="horizontal-line"></div>
        <ion-item class="item-background-color footer-item bg-white"
            style="max-height: 300px; min-height: 300px; overflow: auto;">
            <div class="attachment-content-container" style="width: 100%;">
                <div *ngIf="attachments.length > 0; else loadingattachments">
                    <ion-item class="border-bottom" *ngFor="let item of attachments; let index = index;" lines="none">
                        <ion-icon name="document" slot="start"></ion-icon>
                        <ion-label>
                            <h3>{{item.name}}</h3>
                            <p>{{item.size}}</p>
                        </ion-label>
                        <ion-icon class="trash-icon" *ngIf="!loading['delete' + item.id]" (click)="confirmDelete(item)" 
                            name="trash-outline" slot="end"></ion-icon>
                        <ion-spinner name="crescent" *ngIf="loading['delete' + item.id]"></ion-spinner>

                    </ion-item>
                </div>
                <ng-template #loadingattachments>
                    <div style="width: 100%;
                        height: 300px;
                        display: flex;
                        align-items: center;">
                        <ng-container *ngIf="loading['attachments']; else notfoundattachment">
                            <ion-spinner style="margin: auto;" name="crescent"></ion-spinner>
                        </ng-container>
                        <ng-template #notfoundattachment>
                            <ion-label style="text-align: center;">Nenhum arquivo encontrado.</ion-label>
                        </ng-template>
                    </div>
                </ng-template>
            </div>
        </ion-item>
        <ion-item class="save-message-button-container bg-white">
            <input (change)="onFileSelected($event)" type="file" #inputFile hidden="hidden">
            <ion-button [disabled]="loading['upload']" (click)="chooseFile()" class="save-message-button "
                expand="block">
                <ng-container *ngIf="!loading['upload']; else loadingupload">
                    Carregar arquivo
                    <ion-icon slot="end" name="cloud-upload"></ion-icon>
                </ng-container>
                <ng-template #loadingupload>
                    <ion-spinner></ion-spinner>
                </ng-template>
            </ion-button>
        </ion-item>
    </ion-list>
 
</ion-content>